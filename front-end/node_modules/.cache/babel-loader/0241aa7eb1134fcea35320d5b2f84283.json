{"ast":null,"code":"import _classCallCheck from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/src/components/MovieReviews.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nquery($movieDBId: Int!){\\n    getMovie(movieDBId: $movieDBId){\\n        _id\\n        reviews {\\n            _id\\n            review\\n            username\\n        }\\n    }\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport Error from './utils/Error';\nimport DeleteReview from './DeleteReview';\nimport User from './auth/User';\nvar GetMovie = gql(_templateObject());\n\nvar MovieReviews =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MovieReviews, _Component);\n\n  function MovieReviews() {\n    _classCallCheck(this, MovieReviews);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MovieReviews).apply(this, arguments));\n  }\n\n  _createClass(MovieReviews, [{\n    key: \"render\",\n    value: function render() {\n      var movieDBId = this.props.movieDBId;\n      return React.createElement(Query, {\n        query: GetMovie,\n        variables: {\n          movieDBId: movieDBId\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, function (_ref) {\n        var data = _ref.data,\n            loading = _ref.loading,\n            error = _ref.error;\n        var getMovie = data.getMovie;\n        if (loading) return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31\n          },\n          __self: this\n        }, \"Loading\");\n        if (error) return React.createElement(Error, {\n          error: error.message,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        });\n        return React.createElement(User, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, function (_ref2) {\n          var currentUser = _ref2.data.currentUser,\n              loading = _ref2.loading,\n              error = _ref2.error;\n          var userReviews = currentUser.reviews.map(function (review) {\n            return review._id;\n          });\n          if (loading) return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 37\n            },\n            __self: this\n          }, \"Loading\");\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 39\n            },\n            __self: this\n          }, React.createElement(\"h3\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            },\n            __self: this\n          }, \"Reviews\"), getMovie.reviews.map(function (review) {\n            var madeReview = userReviews.includes(review._id);\n            return React.createElement(\"ul\", {\n              key: review._id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 44\n              },\n              __self: this\n            }, React.createElement(\"ul\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 45\n              },\n              __self: this\n            }, review.review, madeReview && React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 45\n              },\n              __self: this\n            }, React.createElement(DeleteReview, {\n              id: review._id,\n              movieDBId: movieDBId,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 45\n              },\n              __self: this\n            })), React.createElement(\"p\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 45\n              },\n              __self: this\n            }, \"by: \", review.username || \"Anonomous\")));\n          }));\n        });\n      });\n    }\n  }]);\n\n  return MovieReviews;\n}(Component);\n\nexport default MovieReviews;\nexport { GetMovie };","map":{"version":3,"sources":["/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/src/components/MovieReviews.js"],"names":["React","Component","gql","Query","Error","DeleteReview","User","GetMovie","MovieReviews","movieDBId","props","data","loading","error","getMovie","message","currentUser","userReviews","reviews","map","review","_id","madeReview","includes","username"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,KAAT,QAAsB,cAAtB;AAEA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AAEA,IAAMC,QAAQ,GAAGL,GAAH,mBAAd;;IAaMM,Y;;;;;;;;;;;;;6BACK;AAAA,UACGC,SADH,GACiB,KAAKC,KADtB,CACGD,SADH;AAEP,aACI,oBAAC,KAAD;AAAO,QAAA,KAAK,EAAEF,QAAd;AACA,QAAA,SAAS,EAAE;AAACE,UAAAA,SAAS,EAATA;AAAD,SADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGC,gBAA4B;AAAA,YAA1BE,IAA0B,QAA1BA,IAA0B;AAAA,YAApBC,OAAoB,QAApBA,OAAoB;AAAA,YAAXC,KAAW,QAAXA,KAAW;AAAA,YACjBC,QADiB,GACJH,IADI,CACjBG,QADiB;AAEzB,YAAGF,OAAH,EAAY,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAP;AACZ,YAAGC,KAAH,EAAU,OAAO,oBAAC,KAAD;AAAO,UAAA,KAAK,EAAEA,KAAK,CAACE,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACV,eACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,iBAA2C;AAAA,cAAlCC,WAAkC,SAAzCL,IAAyC,CAAlCK,WAAkC;AAAA,cAApBJ,OAAoB,SAApBA,OAAoB;AAAA,cAAXC,KAAW,SAAXA,KAAW;AACxC,cAAMI,WAAW,GAAGD,WAAW,CAACE,OAAZ,CAAoBC,GAApB,CAAwB,UAAAC,MAAM;AAAA,mBAAIA,MAAM,CAACC,GAAX;AAAA,WAA9B,CAApB;AACA,cAAGT,OAAH,EAAY,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAP;AACZ,iBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADA,EAEME,QAAQ,CAACI,OAAT,CAAiBC,GAAjB,CAAqB,UAAAC,MAAM,EAAI;AAC7B,gBAAME,UAAU,GAAGL,WAAW,CAACM,QAAZ,CAAqBH,MAAM,CAACC,GAA5B,CAAnB;AACA,mBACA;AAAI,cAAA,GAAG,EAAED,MAAM,CAACC,GAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAKD,MAAM,CAACA,MAAZ,EAAoBE,UAAU,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAM,oBAAC,YAAD;AAAc,cAAA,EAAE,EAAEF,MAAM,CAACC,GAAzB;AAA8B,cAAA,SAAS,EAAEZ,SAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAN,CAAlC,EAAqG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAQW,MAAM,CAACI,QAAP,IAAmB,WAA3B,CAArG,CADJ,CADA;AAIF,WANA,CAFN,CADF;AAWE,SAfR,CADJ;AAkBE,OAzBN,CADJ;AA6BD;;;;EAhCwBvB,S;;AAkC3B,eAAeO,YAAf;AACA,SAAQD,QAAR","sourcesContent":["import React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\n\nimport Error from './utils/Error';\nimport DeleteReview from './DeleteReview';\nimport User from './auth/User';\n\nconst GetMovie = gql`\nquery($movieDBId: Int!){\n    getMovie(movieDBId: $movieDBId){\n        _id\n        reviews {\n            _id\n            review\n            username\n        }\n    }\n}\n`;\n\nclass MovieReviews extends Component {\n  render() {\n      const { movieDBId } = this.props;\n    return (\n        <Query query={GetMovie}\n        variables={{movieDBId}}\n        >\n        {({data, loading, error}) => {\n            const { getMovie } = data;\n            if(loading) return <div>Loading</div>;\n            if(error) return <Error error={error.message}/>;\n            return(\n                <User>\n                  {({data: {currentUser}, loading, error}) => {\n                      const userReviews = currentUser.reviews.map(review => review._id);\n                      if(loading) return <div>Loading</div>;\n                      return(\n                        <div>\n                        <h3>Reviews</h3>\n                            { getMovie.reviews.map(review => {\n                                const madeReview = userReviews.includes(review._id);\n                                return(\n                                <ul key={review._id}>\n                                    <ul>{review.review}{madeReview && <span><DeleteReview id={review._id} movieDBId={movieDBId}/></span>}<p>by: {review.username || \"Anonomous\"}</p></ul>\n                                </ul>\n                            )})}\n                        </div>\n                      )}}  \n                </User>\n            )}}\n        </Query>\n    )\n  }\n}\nexport default MovieReviews;\nexport {GetMovie};"]},"metadata":{},"sourceType":"module"}