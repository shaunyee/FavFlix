{"ast":null,"code":"import _regeneratorRuntime from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/src/components/auth/Signin.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: center\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation($username: String!, $password: String!) {\\n    signin(username: $username, password: $password) {\\n      username\\n      email\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { Mutation } from 'react-apollo';\nimport styled from 'styled-components';\nimport Error from '../utils/Error';\nimport { CurrentUserQuery } from './User';\nvar SigninUser = gql(_templateObject());\nvar initialState = {\n  username: null,\n  email: null,\n  password: null,\n  confirmPassword: null,\n  errorMessage: null\n};\n\nvar Signin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signin, _Component);\n\n  function Signin() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Signin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Signin)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = _objectSpread({}, initialState);\n\n    _this.handleChange = function (e) {\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e, signin) {\n        var validPassword, validUsername, validForm;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.next = 3;\n                return _this.setState({\n                  errorMessage: null\n                });\n\n              case 3:\n                validPassword = _this.state.password === _this.state.confirmPassword && _this.state.password !== null;\n                validUsername = _this.state.username !== null;\n                validForm = validUsername && validPassword;\n\n                if (!validUsername) {\n                  _this.setState({\n                    errorMessage: \"Please Provide a Username\"\n                  });\n                } else if (!validPassword) {\n                  _this.setState({\n                    errorMessage: \"Passwords Do Not Match\"\n                  });\n                } else if (validForm) {\n                  signin();\n                }\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(Signin, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          username = _this$state.username,\n          password = _this$state.password,\n          errorMessage = _this$state.errorMessage;\n      return React.createElement(Mutation, {\n        mutation: SigninUser,\n        variables: {\n          username: username,\n          password: password\n        },\n        refetchQueries: CurrentUserQuery,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, function (signin, _ref2) {\n        var error = _ref2.error,\n            loading = _ref2.loading;\n        return React.createElement(FormDiv, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, \"Sign In\"), React.createElement(\"form\", {\n          method: \"post\",\n          onSubmit: function onSubmit(e) {\n            return _this2.handleSubmit(e, signin);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          placeholder: \"username\",\n          onChange: _this2.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"password\",\n          onChange: _this2.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          type: \"password\",\n          name: \"confirmPassword\",\n          placeholder: \"confirmPassword\",\n          onChange: _this2.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, \"Sign\", loading ? 'ing' : \"\", \" up\"), errorMessage !== null && React.createElement(Error, {\n          error: _this2.state.errorMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }), error && React.createElement(Error, {\n          error: error.message,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        })));\n      });\n    }\n  }]);\n\n  return Signin;\n}(Component);\n\nexport default Signin;\nvar FormDiv = styled.div(_templateObject2());","map":{"version":3,"sources":["/Users/yeezy/Desktop/projects/graphql-apollo/projects/movies2/front-end/src/components/auth/Signin.js"],"names":["React","Component","gql","Mutation","styled","Error","CurrentUserQuery","SigninUser","initialState","username","email","password","confirmPassword","errorMessage","Signin","state","handleChange","e","target","name","value","setState","handleSubmit","signin","preventDefault","validPassword","validUsername","validForm","error","loading","message","FormDiv","div"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { Mutation } from 'react-apollo';\nimport styled from 'styled-components';\n\nimport Error from '../utils/Error';\nimport { CurrentUserQuery } from './User'\n\nconst SigninUser = gql`\n  mutation($username: String!, $password: String!) {\n    signin(username: $username, password: $password) {\n      username\n      email\n    }\n  }\n`;\n\nconst initialState = {\n  username: null,\n  email: null,\n  password: null,\n  confirmPassword: null,\n  errorMessage: null\n}\n\n class Signin extends Component {\n   state = {\n    ...initialState\n   }\n   handleChange = (e) => {\n     const {name, value } = e.target;\n     this.setState({[name]: value});\n   }\n   handleSubmit = async (e, signin) => {\n     e.preventDefault();\n     await this.setState({errorMessage: null})\n    const validPassword = this.state.password === this.state.confirmPassword && this.state.password !== null;\n    const validUsername = this.state.username !== null;\n    const validForm = validUsername && validPassword;\n    if(!validUsername) {\n      this.setState({errorMessage: \"Please Provide a Username\"})\n    } else if(!validPassword){\n      this.setState({errorMessage: \"Passwords Do Not Match\"})\n    } else if(validForm){\n      signin();\n    }\n   }\n  render() {\n    const { username, password, errorMessage } = this.state;\n    return (\n      <Mutation mutation={SigninUser} variables={{username, password}} refetchQueries={CurrentUserQuery}>\n      {(signin, {error, loading}) => {\n        return(\n            <FormDiv>\n            <h1>Sign In</h1>\n              <form method=\"post\" onSubmit={e => this.handleSubmit(e, signin)}>\n                <input type=\"text\" name=\"username\" placeholder=\"username\" onChange={this.handleChange}/><br />\n                <input type=\"password\" name=\"password\" placeholder=\"password\" onChange={this.handleChange}/><br />\n                <input type=\"password\" name=\"confirmPassword\" placeholder=\"confirmPassword\" onChange={this.handleChange}/><br />\n                <button>Sign{loading ? 'ing' : \"\"} up</button>\n                {errorMessage !== null && <Error error={this.state.errorMessage} />}\n                {error && <Error error={error.message} />}\n              </form>\n            </FormDiv>\n          )\n        }\n      }\n      </Mutation>\n    )\n  }\n}\nexport default Signin;\n\nconst FormDiv = styled.div`\n  text-align: center\n`;"]},"metadata":{},"sourceType":"module"}