{"ast":null,"code":"import _toConsumableArray from \"/Users/yeezy/Desktop/projects/react/practice/fav-flix/front-end/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/yeezy/Desktop/projects/react/practice/fav-flix/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yeezy/Desktop/projects/react/practice/fav-flix/front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yeezy/Desktop/projects/react/practice/fav-flix/front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yeezy/Desktop/projects/react/practice/fav-flix/front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yeezy/Desktop/projects/react/practice/fav-flix/front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/yeezy/Desktop/projects/react/practice/fav-flix/front-end/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/yeezy/Desktop/projects/react/practice/fav-flix/front-end/src/components/MovieReviews.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n    margin-left: 0;\\n    padding-left: 0;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    padding-left: 0;\\n    margin-left: 0;\\n    color: var(--main-text-color);\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nquery($movieDBId: Int!){\\n    getMovie(movieDBId: $movieDBId){\\n        _id\\n        likes\\n        reviews {\\n            _id\\n            review\\n            username\\n            dateAdded\\n        }\\n    }\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport Error from './utils/Error';\nimport DeleteReview from './DeleteReview';\nimport User from './auth/User';\nimport styled from 'styled-components';\nvar GetMovie = gql(_templateObject());\n\nvar MovieReviews =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MovieReviews, _Component);\n\n  function MovieReviews() {\n    _classCallCheck(this, MovieReviews);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MovieReviews).apply(this, arguments));\n  }\n\n  _createClass(MovieReviews, [{\n    key: \"render\",\n    value: function render() {\n      var movieDBId = this.props.movieDBId;\n      return React.createElement(Query, {\n        query: GetMovie,\n        variables: {\n          movieDBId: movieDBId\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, function (_ref) {\n        var getMovie = _ref.data.getMovie,\n            loading = _ref.loading,\n            error = _ref.error;\n        if (loading) return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33\n          },\n          __self: this\n        }, \"Loading\");\n        if (error) return React.createElement(Error, {\n          error: error.message,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        });\n\n        var sortReviews = _toConsumableArray(getMovie.reviews).reverse();\n\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, React.createElement(User, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, function (_ref2) {\n          var currentUser = _ref2.data.currentUser,\n              loading = _ref2.loading,\n              error = _ref2.error;\n          if (loading) return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            },\n            __self: this\n          }, \"Loading\");\n\n          if (!currentUser) {\n            return React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 43\n              },\n              __self: this\n            }, sortReviews.map(function (review) {\n              return React.createElement(ReviewWrapper, {\n                key: review._id,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 46\n                },\n                __self: this\n              }, React.createElement(MovieReviewSection, {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 47\n                },\n                __self: this\n              }, review.review, React.createElement(\"p\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 47\n                },\n                __self: this\n              }, \"by: \", review.username)));\n            }));\n          }\n\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 53\n            },\n            __self: this\n          }, sortReviews.map(function (review) {\n            var userReviews = currentUser.reviews.map(function (review) {\n              return review._id;\n            });\n            var madeReview = userReviews.includes(review._id);\n            return React.createElement(ReviewWrapper, {\n              key: review._id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 58\n              },\n              __self: this\n            }, React.createElement(MovieReviewSection, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 59\n              },\n              __self: this\n            }, review.review, madeReview && React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 59\n              },\n              __self: this\n            }, React.createElement(DeleteReview, {\n              id: review._id,\n              movieDBId: movieDBId,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 59\n              },\n              __self: this\n            })), React.createElement(\"p\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 59\n              },\n              __self: this\n            }, \"by: \", review.username)));\n          }));\n        }));\n      });\n    }\n  }]);\n\n  return MovieReviews;\n}(Component);\n\nvar ReviewWrapper = styled.ul(_templateObject2());\nvar MovieReviewSection = styled.ul(_templateObject3());\nexport default MovieReviews;\nexport { GetMovie };","map":{"version":3,"sources":["/Users/yeezy/Desktop/projects/react/practice/fav-flix/front-end/src/components/MovieReviews.js"],"names":["React","Component","gql","Query","Error","DeleteReview","User","styled","GetMovie","MovieReviews","movieDBId","props","getMovie","data","loading","error","message","sortReviews","reviews","reverse","currentUser","map","review","_id","username","userReviews","madeReview","includes","ReviewWrapper","ul","MovieReviewSection"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\n\nimport Error from './utils/Error';\nimport DeleteReview from './DeleteReview';\nimport User from './auth/User';\nimport styled from 'styled-components';\n\nconst GetMovie = gql`\nquery($movieDBId: Int!){\n    getMovie(movieDBId: $movieDBId){\n        _id\n        likes\n        reviews {\n            _id\n            review\n            username\n            dateAdded\n        }\n    }\n}\n`;\n\nclass MovieReviews extends Component {\n  render() {\n      const { movieDBId } = this.props;\n    return (\n        <Query query={GetMovie}\n        variables={{movieDBId}}\n        >\n        {({data: {getMovie}, loading, error}) => {\n            if(loading) return <div>Loading</div>;\n            if(error) return <Error error={error.message}/>;\n            const sortReviews = [...getMovie.reviews].reverse();\n            return(\n                <div>\n                <User>\n                  {({data: {currentUser}, loading, error}) => {\n                      if(loading) return <div>Loading</div>;\n                      if(!currentUser){\n                          return(\n                            <div>\n                            { sortReviews.map(review => {\n                                return(\n                                <ReviewWrapper key={review._id}>\n                                    <MovieReviewSection>{review.review}<p>by: {review.username}</p></MovieReviewSection>\n                                </ReviewWrapper>\n                            )})}\n                        </div>\n                          )}\n                      return(\n                        <div>\n                            { sortReviews.map(review => {\n                                const userReviews = currentUser.reviews.map(review => review._id);\n                                const madeReview = userReviews.includes(review._id);\n                                return(\n                                <ReviewWrapper key={review._id}>\n                                    <MovieReviewSection>{review.review}{madeReview && <span><DeleteReview id={review._id} movieDBId={movieDBId}/></span>}<p>by: {review.username}</p></MovieReviewSection>\n                                </ReviewWrapper>\n                            )})}\n                        </div>\n                      )}}  \n                </User>\n            </div>\n            )}}\n        </Query>\n    )\n  }\n}\n\nconst ReviewWrapper = styled.ul`\n    padding-left: 0;\n    margin-left: 0;\n    color: var(--main-text-color);\n`;\nconst MovieReviewSection = styled.ul`\n    margin-left: 0;\n    padding-left: 0;\n`;\nexport default MovieReviews;\nexport {GetMovie};"]},"metadata":{},"sourceType":"module"}